<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions" xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:jsf="http://xmlns.jcp.org/jsf">
<h:head>
      <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
      <script src="https://code.jquery.com/jquery-migrate-3.0.0.min.js"></script>
</h:head>
<link rel="stylesheet" href="style.css">
</link>
<style>
      @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@500&amp;family=Orbitron:wght@900&amp;family=Poppins:wght@300;700&amp;family=Righteous&amp;display=swap');

      * {
            font-family: 'Poppins', sans-serif;
            text-shadow: 0 0 10px #599bff;
      }

      body {
            font-family: 'Courier New';
            background-color: rgb(46, 46, 184);
            color: white;
            text-align: center;
            padding: 1% 3%;
            align-content: center;
            font-size: 24px;
      }

      body .ui-button {
            text-shadow: 1px 1px 10px white;
            overflow: hidden;
            color: #fff;
            border-radius: 30px;
            border-color: blue;
            border-width: 1px;
            box-shadow: 0 0 0 0 rgba(143, 64, 248, 0.5), 0 0 0 0 rgba(39, 200, 255, 0.5);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            content: "";
            position: relative;
            background-color: #ff3cac;
            background-image: linear-gradient(90deg, rgba(0,35,255,1) 0%, rgba(77,167,255,1) 50%);
            width: 22%;
            height: 40px;
            margin: 10px;
        }

      .divBody {
            background-color: rgba(1, 1, 70, 0.623);
            border-radius: 15px;
            height: auto;
            width: auto;
            padding: 3% 10%;
      }

      .titulo {
            font-size: 40px;
      }

      .formbox {
            border-radius: 15px;
            background-color: rgba(1, 1, 70, 0.623);
            padding: 3%;
            text-align: center;
            align-items: center;
            align-content: center;
      }

      .bodylogo {
            background-color: rgb(46, 46, 184);
            color: rgb(46, 46, 184);
      }

      .botn {
            width: 22%;
            height: 40px;
            margin: 10px;
            text-align: center;
            align-self: center;
            align-items: center;
            position: relative;
            font-size: 18px;
      }

      .divCheck {
            display: inline-flex;
            text-align: center;
            align-self: center;
            align-items: center;
      }

      .separador {
            margin-bottom: 15px;
      }

      .calendario {
            font-size: 18px;
            size-adjust: auto;
      }

      .ui-botton {
            width: 22%;
      }

      .ui-datepicker.ui-widget-content {
            font-weight: normal;
            font-size: 16px;
      }

      .customDialog {
            color: rgb(46, 46, 184);
            background-color: rgb(46, 46, 184);
            min-width: 80%;
            max-width: 90%;
            min-height: 40%;
            max-height: 60%;
            padding: 2%;
      }

      .customDialog .ui-dialog-titlebar.ui-widget-header {
            background-color: rgb(46, 46, 184);
      }

      body .ui-dialog .ui-dialog-content {
            background-color: rgb(46, 46, 184);
      }

      .encabezado {
            font-size: 23px;
            color: white;
      }

      .all {
            background-color: rgba(1, 1, 70, 0.623);
            font-size: 18px;
            border-radius: 15px;
            padding: 3%;
            color: white;
      }

      .buttons {
            width: 100%;
            font-size: 15px;
      }
</style>
<title>Reservar Recurso</title>

<body class="page">
      <p:messages class="msgs" id="messages" showDetail="true" closable="true">
            <p:autoUpdate />
      </p:messages>
      <div class="bodylogo">
            <img class="logo" src="img\Logoescuelaazul.jpg" alt="logo"> </img>`
      </div>
      <div class="divBody">
            <p class="titulo">Reservar Recurso</p>

            <h:form id="formReservarRecurso" class="formbox">
                  <div class="divText separador">
                        <b>
                              <h:outputLabel value="Recurso:" />
                        </b>
                        <!--Aqui enlace con pagina horarios -->
                        <h:outputLabel value="#{reservarBean.recurso}" />
                  </div>
                  <div class="divText separador">
                        <b>
                              <h:outputLabel value="Fecha:" />
                        </b>
                        <!--Aqui enlace con pagina horarios -->
                        <h:outputLabel value="#{reservarBean.fechaInicial.toLocalDate()}" />
                  </div>
                  <div class="divText separador">
                        <b>
                              <h:outputLabel value=" Hora:" />
                        </b>
                        <!--Aqui enlace con pagina horarios -->
                        <h:outputLabel
                              value="#{reservarBean.fechaInicial.getHour()}:00 - #{reservarBean.fechaInicial.plusHours(reservarBean.horas).getHour()}:00" />
                  </div>
                  <div class="separador">
                        <h:outputLabel for="selectRecurrencia" value="Recurrencia: " />
                        <h:selectOneMenu id="selectRecurrencia" value="#{reservarBean.recurrencia}">
                              <p:ajax event="change" render="formReservarRecurso" execute="selectRecurrencia"
                                    update="formReservarRecurso" listener="#{reservarBean.cambioEstado}" />
                              <f:selectItem class="select" itemLabel="Ninguna" itemValue="0"></f:selectItem>
                              <f:selectItem class="select" itemLabel="Diariamente" itemValue="1"></f:selectItem>
                              <f:selectItem class="select" itemLabel="Semanalmente" itemValue="2"></f:selectItem>
                              <f:selectItem class="select" itemLabel="Mensualmente" itemValue="3"></f:selectItem>
                        </h:selectOneMenu>
                  </div>
                  <div id="divCalendar" class="separador">
                        <h:outputLabel for="calendario" value="Fecha final: "
                              style="display: #{reservarBean.mostrar}" />
                        <p:calendar class="calendario" id="calendario" value="#{reservarBean.fechaFinal}"
                              disabledWeekends="true" style="display: #{reservarBean.mostrar}" />
                  </div>
                  <!--Aqui enlace con pagina horarios -->
                  <p:commandButton update="formReservarRecurso" class="botn but-style" value="Reservar"
                        actionListener="#{reservarBean.reservar(userBean.userId)}"
                        oncomplete="PF('dlgRedirect').show();" />
                  <br>
                  <!--Aqui enlace con pagina horarios -->
                  <p:commandButton update="formReservarRecurso" class="botn but-style" value="Volver"
                        actionListener="#{navigationController.paginaCalendario()}" />
                  </br>

                  <p:dialog id="dlgRedirect" widgetVar="dlgRedirect" modal="true" dynamic="false" resizable="false"
                        styleClass="customDialog" closable="false">
                        <style>
                              * {
                                    font-family: 'Poppins', sans-serif;
                                    text-shadow: 0 0 10px #599bff;
                              }
                        </style>
                        <b>
                              <h:outputLabel class="encabezado" value="#{reservarBean.encabezado}" />
                        </b>
                        <div class="ui-grid ui-grid-responsive all">
                              <div class="ui-grid-row-1">
                                    <h:outputLabel value="#{reservarBean.fallos}" />
                              </div>
                              <br />
                              <div class="ui-grid-row-3 buttons">
                                    <h:commandButton class="botn but-style" actionListener="#{reservarBean.redirect(0)}"
                                          value="Ir a Mis reservas" />
                                    <h:commandButton class="botn but-style" actionListener="#{reservarBean.redirect(1)}"
                                          value="Ir a Home" />
                              </div>
                        </div>
                  </p:dialog>
            </h:form>
      </div>
</body>

</html>